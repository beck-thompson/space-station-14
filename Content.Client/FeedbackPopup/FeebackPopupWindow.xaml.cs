using Content.Client.UserInterface.Controls;
using Content.Shared.FeedbackSystem;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.XAML;
using Robust.Shared.Prototypes;

namespace Content.Client.FeedbackPopup;

[GenerateTypedNameReferences]
public sealed partial class FeebackPopupWindow : FancyWindow
{
    public FeebackPopupWindow()
    {
        RobustXamlLoader.Load(this);
    }

    public void Update(List<ProtoId<FeedbackPopupPrototype>> popupProtos)
    {
        NotificationContainer.RemoveAllChildren();

        foreach (var proto in popupProtos)
        {
            var entry = new FeedbackEntry();
            entry.Update(proto);
            NotificationContainer.AddChild(entry);
        }

        NumNotifications.Text = Loc.GetString("feedbackpopup-control-total-surveys", ("num", popupProtos.Count));
    }
}
